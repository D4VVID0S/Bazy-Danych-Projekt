DROP DATABASE IF EXISTS fakturowanie;

CREATE DATABASE fakturowanie;

USE fakturowanie;

CREATE TABLE wojewodztwa 
(kod_w	CHAR(3) not null,
 PRIMARY KEY (kod_w),
 wojewodztwo VARCHAR(30) not null
);

INSERT INTO wojewodztwa (kod_w, wojewodztwo)
VALUES ('dol', 'dolnośląskie'), ('kuj', 'kujawsko-pomorskie'), ('lub','lubelskie'), ('lue','lubuskie'), ('lod','łódzkie'), ('mal','małopolskie'), ('maz','mazowieckie'), ('opo','opolskie'), ('pod','podkarpackie'), ('pol','podlaskie'), ('pom','pomorskie'), ('sla','śląskie'), ('swi','świętokrzyskie'), ('war','warmińsko-mazurskie'), ('wie','wielkopolskie'), ('zac','zachodniopomorskie');

CREATE TABLE miasta 
(kod_pocztowy VARCHAR(6) not null, primary key(kod_pocztowy),
 kod_w char(3) not null,
	foreign key (kod_w) references wojewodztwa(kod_w),
 miasto varchar(30) not null
);

INSERT INTO miasta (kod_pocztowy, kod_w, miasto)
VALUES ('50-100', 'dol', 'Wrocław'), ('61-772', 'wie', 'Poznań'), ('00-229', 'maz', 'Warszawa'), ('31-010', 'mal', 'Kraków'), ('80-324', 'pom', 'Gdańsk');

CREATE TABLE kontrahenci(id_k int AUTO_INCREMENT not null, PRIMARY KEY (id_k), nazwa VARCHAR(50) not null, nazwa_skr VARCHAR(20) not null, ulica VARCHAR(30), nr VARCHAR(6), nr2 VARCHAR(6), kod_pocztowy VARCHAR(6), foreign key (kod_pocztowy) references miasta(kod_pocztowy));

INSERT INTO `kontrahenci` (`id_k`, `nazwa`, `nazwa_skr`, `ulica`, `nr`, `nr2`, `kod_pocztowy`) VALUES ('1', 'Polski Koncern Olejowy', 'PKOl', 'Dolna', '2', NULL, '00-229'),
('2','Kogutek Sp. z o.o.','Kogutek','Prawoślazowa','2',6,'00-229'),
('3','Mirabelka s.a.','Mirabelka','Miłosna','56',NULL,'00-229'),
('4','Party Keeper','Party Keeper','Niewąska','23',NULL,'00-229'),
('5','Kuskus Mierzejski Wiesław Co.','Kuskus','Kwaśna','12',NULL,'00-229'),
('6','Gigant Hobby','Gigant','Pokurczona','22','987','50-100'),
('7','Huta Metali Nieżelaznych','Metale','Demoniczna','1',NULL,'50-100'),
('8','Szewc Dratewka s.j.','Dratewka','Smoka Wawelskiego','2',NULL,'50-100'),
('9','Combo Maxi Grand Wypas','Combo','Nieszczęśników','92',123,'50-100'),
('10','Wyższa Szkoła Balonowa','WSBa','Kosmonautów','1',NULL,'50-100'),
('11','Serwis Gitarowy Męczystruna','Męczystruna','Smętna','2',NULL,'50-100'),
('12','Zespół Weselny Mezalians','Mezalians','Komercyjna','5',NULL,'50-100'),
('13','Instytut Piękna - Żabka','Żabka','Kacza','2',NULL,'61-772'),
('14','Hipermarket Zbysio','Zbysio','Nuklearna','7',NULL,'61-772'),
('15','PHU Kartofelek','Kartofelek','Denna','2',NULL,'61-772'),
('16','Bar Agatka','Agatka','Światłoczuła','9',NULL,'61-772'),
('17','Karczma Wioletka','Wioletka','Rozsądna','2',NULL,'61-772'),
('18','Toaleta Miejska','Toaleta Miejska','Sadowa','12',NULL,'31-010'),
('19','Przytułek dla bezdomnych','Przytułek dla bezdomnych','Szczepionkowa','3',NULL,'31-010'),
('20','Targowisko Miejskie','TM','Szczypiorkowa','88',234,'31-010'),
('21','Dom spokojnej młodości LUZIK','Dom spokojnej młodości','Mokrych kapci','102',NULL,'31-010'),
('22','PH Sklep Obuwniczy Podeszwa','Podeszwa','Wykałaczkowa','876','4c','31-010'),
('23','Butik egzotyczny Malwa','Malwa','Naturalna','2',NULL,'80-324'),
('24','Telewizja Regionalna 3','TR3','Biomedyczna','7',NULL,'80-324'),
('25','Przedszkole Miejskie nr 4','Przedszkole nr 3','Nerwowa','2',NULL,'80-324'),
('26','Przedsiębiorstwo Informatyczne KWERENDA','Kwerenda','Doskonała','9',NULL,'80-324'),
('27','Spy - Montaż Luster Wiedeńskich','Spy','Spokojna','2',NULL,'80-324'),
('28','Fundacja wspierająca Zamek Średniowieczny','Zamek','Wałowa','12',NULL,'80-324');



CREATE TABLE faktury(id_f int(6) AUTO_INCREMENT not null, PRIMARY KEY (id_f), numer varchar(14) not null, data_wystawienia datetime not null, data_sprzedazy datetime not null, data_platnosci datetime null, id_k int, foreign key (id_k) references kontrahenci(id_k));

INSERT INTO `faktury` (`id_f`, `numer`, `data_wystawienia`, `data_sprzedazy`, `data_platnosci`, `id_k`) VALUES (56, 'FA001/2018', '2018-04-12 00:00:00', '2018-04-12 00:00:00', '2018-04-19 00:00:00', '1'),
(1, 'FA001/2018', '2018-04-10 00:00:00', '2018-04-12 00:00:00', '2018-04-19 00:00:00', '1'),
(2, 'FA002/2018', '2018-04-12 00:00:00', '2018-04-12 00:00:00', '2018-04-19 00:00:00', '1'),
(3, 'FA003/2018', '2018-04-11 00:00:00', '2018-04-12 00:00:00', '2018-04-19 00:00:00', '3'),
(4, 'FA004/2018', '2018-04-09 00:00:00', '2018-04-12 00:00:00', '2018-04-19 00:00:00', '3'),
(5, 'FA005/2018', '2018-04-09 00:00:00', '2018-04-12 00:00:00', '2018-04-19 00:00:00', '3'),
(6, 'FA006/2018', '2018-04-10 00:00:00', '2018-04-12 00:00:00', '2018-04-19 00:00:00', '5'),
(7, 'FA007/2018', '2018-04-12 00:00:00', '2018-04-12 00:00:00', '2018-04-19 00:00:00', '5'),
(8, 'FA008/2018', '2018-04-11 00:00:00', '2018-04-12 00:00:00', '2018-04-19 00:00:00', '5'),
(9, 'FA009/2018', '2018-04-12 00:00:00', '2018-04-12 00:00:00', '2018-04-19 00:00:00', '7'),
(10, 'FA010/2018', '2018-04-08 00:00:00', '2018-04-12 00:00:00', '2018-04-19 00:00:00', '7'),
(11, 'FA011/2018', '2018-04-06 00:00:00', '2018-04-12 00:00:00', '2018-04-19 00:00:00', '8'),
(12, 'FA012/2018', '2018-04-07 00:00:00', '2018-04-12 00:00:00', '2018-04-19 00:00:00', '9'),
(13, 'FA013/2018', '2018-04-12 00:00:00', '2018-04-12 00:00:00', '2018-04-19 00:00:00', '9'),
(14, 'FA014/2018', '2018-04-12 00:00:00', '2018-04-12 00:00:00', '2018-04-19 00:00:00', '11'),
(15, 'FA015/2018', '2018-04-12 00:00:00', '2018-04-12 00:00:00', '2018-04-19 00:00:00', '11'),
(16, 'FA016/2018', '2018-04-09 00:00:00', '2018-04-12 00:00:00', '2018-04-19 00:00:00', '11'),
(17, 'FA017/2018', '2018-04-10 00:00:00', '2018-04-12 00:00:00', '2018-04-19 00:00:00', '13'),
(18, 'FA018/2018', '2018-04-10 00:00:00', '2018-04-12 00:00:00', '2018-04-19 00:00:00', '13'),
(19, 'FA019/2018', '2018-04-11 00:00:00', '2018-04-12 00:00:00', '2018-04-19 00:00:00', '14'),
(20, 'FA020/2018', '2018-04-12 00:00:00', '2018-04-12 00:00:00', '2018-04-19 00:00:00', '14'),
(21, 'FA021/2018', '2018-04-12 00:00:00', '2018-04-12 00:00:00', '2018-04-19 00:00:00', '16'),
(22, 'FA022/2018', '2018-04-12 00:00:00', '2018-04-12 00:00:00', '2018-04-19 00:00:00', '16'),
(23, 'FA023/2018', '2018-04-11 00:00:00', '2018-04-12 00:00:00', '2018-04-19 00:00:00', '16'),
(24, 'FA024/2018', '2018-04-11 00:00:00', '2018-04-12 00:00:00', '2018-04-19 00:00:00', '16'),
(25, 'FA025/2018', '2018-04-12 00:00:00', '2018-04-12 00:00:00', '2018-04-19 00:00:00', '19'),
(26, 'FA026/2018', '2018-04-10 00:00:00', '2018-04-12 00:00:00', '2018-04-19 00:00:00', '19'),
(27, 'FA027/2018', '2018-04-10 00:00:00', '2018-04-12 00:00:00', '2018-04-19 00:00:00', '19'),
(28, 'FA028/2018', '2018-04-12 00:00:00', '2018-04-12 00:00:00', '2018-04-19 00:00:00', '20'),
(29, 'FA029/2018', '2018-04-10 00:00:00', '2018-04-12 00:00:00', '2018-04-19 00:00:00', '20'),
(30, 'FA030/2018', '2018-04-12 00:00:00', '2018-04-12 00:00:00', '2018-04-19 00:00:00', '20'),
(31, 'FA031/2018', '2018-04-09 00:00:00', '2018-04-12 00:00:00', '2018-04-19 00:00:00', '20'),
(32, 'FA032/2018', '2018-04-12 00:00:00', '2018-04-12 00:00:00', '2018-04-19 00:00:00', '21'),
(33, 'FA033/2018', '2018-04-12 00:00:00', '2018-04-12 00:00:00', '2018-04-19 00:00:00', '22'),
(34, 'FA034/2018', '2018-04-09 00:00:00', '2018-04-12 00:00:00', '2018-04-19 00:00:00', '23'),
(35, 'FA035/2018', '2018-04-12 00:00:00', '2018-04-12 00:00:00', '2018-04-19 00:00:00', '23'),
(36, 'FA036/2018', '2018-04-12 00:00:00', '2018-04-12 00:00:00', '2018-04-19 00:00:00', '24'),
(37, 'FA037/2018', '2018-04-12 00:00:00', '2018-04-12 00:00:00', '2018-04-19 00:00:00', '25'),
(38, 'FA038/2018', '2018-04-12 00:00:00', '2018-04-12 00:00:00', '2018-04-19 00:00:00', '26'),
(39, 'FA039/2018', '2018-04-08 00:00:00', '2018-04-12 00:00:00', '2018-04-19 00:00:00', '26'),
(40, 'FA040/2018', '2018-04-12 00:00:00', '2018-04-12 00:00:00', '2018-04-19 00:00:00', '27'),
(41, 'FA041/2018', '2018-04-12 00:00:00', '2018-04-12 00:00:00', '2018-04-19 00:00:00', '28'),
(42, 'FA042/2018', '2018-04-07 00:00:00', '2018-04-12 00:00:00', '2018-04-19 00:00:00', '28'),
(43, 'FA043/2018', '2018-04-12 00:00:00', '2018-04-12 00:00:00', '2018-04-19 00:00:00', '28'),
(44, 'FA044/2018', '2018-04-12 00:00:00', '2018-04-12 00:00:00', '2018-04-19 00:00:00', '28'),
(45, 'FA045/2018', '2018-04-11 00:00:00', '2018-04-12 00:00:00', '2018-04-19 00:00:00', '17'),
(46, 'FA046/2018', '2018-04-12 00:00:00', '2018-04-12 00:00:00', '2018-04-19 00:00:00', '17'),
(47, 'FA047/2018', '2018-04-12 00:00:00', '2018-04-12 00:00:00', '2018-04-19 00:00:00', '15'),
(48, 'FA048/2018', '2018-04-12 00:00:00', '2018-04-12 00:00:00', '2018-04-19 00:00:00', '6'),
(49, 'FA049/2018', '2018-04-10 00:00:00', '2018-04-12 00:00:00', '2018-04-19 00:00:00', '26'),
(50, 'FA050/2018', '2018-04-10 00:00:00', '2018-04-12 00:00:00', '2018-04-19 00:00:00', '26'),
(51, 'FA051/2018', '2018-04-12 00:00:00', '2018-04-12 00:00:00', '2018-04-19 00:00:00', '6'),
(52, 'FA052/2018', '2018-04-12 00:00:00', '2018-04-12 00:00:00', '2018-04-19 00:00:00', '7'),
(53, 'FA053/2018', '2018-04-11 00:00:00', '2018-04-12 00:00:00', '2018-04-19 00:00:00', '4'),
(54, 'FA054/2018', '2018-04-12 00:00:00', '2018-04-12 00:00:00', '2018-04-19 00:00:00', '4'),
(55, 'FA055/2018', '2018-04-05 00:00:00', '2018-04-12 00:00:00', '2018-04-19 00:00:00', '22');

CREATE TABLE asortyment(id_a int(6) AUTO_INCREMENT not null, PRIMARY KEY (id_a), produkt VARCHAR(20), jm VARCHAR(4), cena decimal(8,2), vat decimal(5,3));

INSERT INTO asortyment (id_a, produkt, jm, cena, vat) 
VALUES 
(1, 'gwoździe 5 calowe', 'kg', 23, 0.23),
(2, 'drut stalowy', 'm', 67.60, 0.23),
(3, 'śruba fi 18', 'szt.', 5, 0.23),
(4, 'śruba fi 22', 'szt.', 7.90, 0.23),
(5, 'lina stalowa', 'm', 29, 0.23),
(6, 'teownik', 'szt.', 53, 0.23),
(7, 'cegła klinkierowa', 'szt.', 8.2, 0.23),
(8, 'kostka brukowa', 'm2', 59.89, 0.23),
(9, 'glazura', 'm2', 99.99, 0.23),
(10, 'gres', 'm2', 89, 0.23),
(11, 'terakota', 'm2', 78, 0.23),
(12, 'farba akrylowa', 'l', 123, 0.23),
(13, 'rozpuszczalnik', 'l', 16.5, 0.23),
(14, 'listwa', 'szt.', 12.3, 0.23),
(15, 'panele podłogowe', 'm2', 97.01, 0.23),
(16, 'kątownik', 'szt.', 23, 0.23),
(17, 'cegła zwykła', 'szt.', 5.09, 0.23),
(18, 'wieźba dachowa', 'kg', 20, 0.23),
(19, 'płyta kartonowo-gipsowa', 'm2', 60.06, 0.23),
(20, 'uszczelka fi 52mm', 'szt.', 8.97, 0.23),
(21, 'uszczelka fi 44mm', 'szt.', 7.99, 0.23);

CREATE TABLE pozycje(id_p int(6) AUTO_INCREMENT not null, PRIMARY KEY (id_p), id_f int(6), id_a int(6), ilosc decimal(5,2), foreign key (id_f) references faktury(id_f), foreign key (id_a) references asortyment(id_a) );

INSERT INTO pozycje (id_f, id_a, ilosc) 
VALUES 
(1, 17, 4), (1, 12, 500), (1, 7, 12), (2, 1, 3),
(2, 7, 3), (4, 1, 4), (4, 17, 300), (4, 4, 4),
(5, 7, 4), (5, 1, 4), (6, 17, 400), (6, 11, 4),
(6, 7, 3), (6, 1, 4), (7, 17, 500), (7, 12, 4),
(7, 7, 4), (7, 1, 4), (8, 17, 600), (8, 13, 4),
(8, 7, 4), (9, 1, 4), (9, 17, 750), (9, 14, 4),
(10, 7, 4), (10, 1, 4), (10, 17, 800), (10, 14, 4),
(11, 7, 4), (12, 1, 4), (14, 17, 700), (15, 16, 4),
(16, 7, 4), (1, 1, 4), (1, 17, 300), (1, 15, 4),
(17, 7, 4), (17, 1, 4), (17, 17, 200), (17, 2, 4),
(18, 7, 2), (19, 1, 2), (19, 17, 400), (21, 2, 2),
(21, 7, 2), (21, 1, 2), (22, 17, 550), (23, 2, 2),
(24, 7, 2), (25, 1, 2), (26, 17, 2), (27, 3, 2),
(30, 7, 2), (30, 1, 2), (30, 17, 230), (31, 3, 2),
(31, 7, 2), (32, 1, 2), (33, 17, 100), (34, 3, 2),
(35, 7, 2), (36, 1, 2), (36, 17, 2), (37, 3, 2),
(37, 7, 3), (38, 1, 10), (38, 17, 100), (38, 4, 10),
(39, 7, 3), (39, 1, 10), (40, 17, 120), (41, 5, 10),
(41, 7, 3), (41, 1, 10), (41, 17, 444), (41, 6, 10),
(42, 7, 6), (43, 1, 10), (43, 17, 10), (44, 8, 10),
(46, 7, 3), (48, 1, 10), (49, 17, 3), (49, 9, 10),
(51, 7, 3), (51, 1, 10), (52, 17, 6), (53, 10, 10),
(55, 7, 3), (55, 1, 10), (55, 17, 35), (56, 10, 10);